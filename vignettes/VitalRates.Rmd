---
title: "plhdbR Vignette"
author: "Fernando A. Campos"
date: "`r Sys.Date()`"
output:
  md_document:
    variant: markdown_github
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[Back to Respository](https://github.com/camposfa/plhdbR)

# Functions for calculating vital rates

## Prepare workspace and read biography and fertility data

```{r, message = FALSE, warning = FALSE} 
  library(plhdbR)
  load_plhdb_packages()

  lh <- read_bio_table("biography_2015_03_17.csv")
  fert <- read_fert_table("fertility_2015_03_17.csv")
```

It's a good idea to [error-check](ErrorChecking.md) the data extensively before 
running the fuctions below.

## Median age at first reproduction

The function `median_age_first_rep` uses the biography data to calculate the
median age at first reproduction for each study species.

```{r}
  median_age_first_rep(lh)
```

## Age-specific fertility

The function `age_specific_fertility` uses the biography and fertility tables to
calculate age-specific fertility separately for each study species using discrete
age-classes. The procedure follows the instructions provided by Bill Morris in the
"Methods for calculating vital rates" Word file available on the PLHDB Wiki.
_Warning_: this function takes ~1 minute to run.

```{r}
  age_specific_fertility(lh, fert)
```

## Stage-specific fertility between censuses

__Work in progress__